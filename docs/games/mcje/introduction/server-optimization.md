# Minecraft æ•´åˆåŒ…æ€§èƒ½ä¼˜åŒ–æŒ‡å—ä¸é…ç½®å‚è€ƒ

::: tip ğŸ“‹ æ¦‚è¿°
æœ¬æŒ‡å—æä¾› Minecraft Javaç‰ˆæ¨¡ç»„æ•´åˆåŒ…çš„å…¨é¢æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼ŒåŒ…å«é…ç½®è°ƒä¼˜ã€ç¡¬ä»¶é€‰å‹å’Œä¸»æµæ•´åˆåŒ…æ€§èƒ½éœ€æ±‚åˆ†æã€‚
:::

### ğŸ¯ é€‚ç”¨èŒƒå›´
- **æœåŠ¡ç«¯ç±»å‹**ï¼šForgeã€Fabricã€NeoForge æ¨¡ç»„æœåŠ¡å™¨
- **è´Ÿè½½åœºæ™¯**ï¼šä¼‘é—²ç”Ÿå­˜ã€ä¸­ç­‰å¼ºåº¦æœºæ¢°ã€å¤šäººè”æœº
- **æ€§èƒ½ç›®æ ‡**ï¼šç¨³å®š20TPSã€ä½å»¶è¿Ÿã€å†…å­˜ä¼˜åŒ–

::: warning âš ï¸ **é‡è¦æç¤º**ï¼š
æœ¬æŒ‡å—åŸºäºéæé™è´Ÿè½½åœºæ™¯ï¼Œé‡åº¦çº¢çŸ³/å·¥ä¸šæœºæ¢°éœ€è¦é¢å¤–ä¼˜åŒ–
:::

## âš™ï¸ åŸºç¡€ä¼˜åŒ–é…ç½®æ–¹æ¡ˆ

### ğŸ”§ server.properties æ ¸å¿ƒå‚æ•°

```properties
# åŸºç¡€è®¾ç½®
allow-flight=true                    # å…è®¸é£è¡Œï¼ˆæ¨¡ç»„å¸¸éœ€è¦ï¼‰
max-tick-time=60000                  # Tickè¶…æ—¶æ£€æµ‹ï¼ˆ60ç§’ï¼Œé˜²æ­¢å¤æ‚æœºæ¢°å´©æœï¼‰
enforce-secure-profile=false        # å…³é—­å¼ºåˆ¶å®‰å…¨é…ç½®ï¼ˆé€‚ç”¨äºç¦»çº¿æœåŠ¡å™¨ï¼‰

# æ€§èƒ½è°ƒä¼˜
view-distance=8                      # æ¸²æŸ“è·ç¦»ï¼ˆ6-10åŒºå—ï¼Œæ ¹æ®æ€§èƒ½è°ƒæ•´ï¼‰
simulation-distance=6                # æ¨¡æ‹Ÿè·ç¦»ï¼ˆæ¯”æ¸²æŸ“è·ç¦»å°2-4ï¼‰
entity-broadcast-range-percentage=80 # å®ä½“å¹¿æ’­èŒƒå›´ï¼ˆé™ä½ç½‘ç»œè´Ÿè½½ï¼‰

# ä¸–ç•Œè®¾ç½®
spawn-protection=0                   # å…³é—­å‡ºç”Ÿç‚¹ä¿æŠ¤ï¼ˆé¿å…æ¨¡ç»„å†²çªï¼‰
max-world-size=10000                 # é™åˆ¶ä¸–ç•Œå¤§å°ï¼ˆé˜²æ­¢æ— é™æ‰©å¼ ï¼‰
```

### ğŸ”© Forge ä¸“ç”¨ä¼˜åŒ–é…ç½®

**æ–‡ä»¶è·¯å¾„**ï¼š`world/serverconfig/forge-server.toml`

```toml
# å®ä½“å¼‚å¸¸å¤„ç†
removeErroringEntities = true           # è‡ªåŠ¨ç§»é™¤å´©æºƒå®ä½“
removeErroringBlockEntities = true      # è‡ªåŠ¨ä¿®å¤å¼‚å¸¸æ–¹å—å®ä½“

# æ€§èƒ½ä¼˜åŒ–
fixAdvancementLoading = true            # ä¿®å¤æˆå°±åŠ è½½é—®é¢˜
dimensionUnloadQueueDelay = 0           # ç«‹å³å¸è½½æ— äººç»´åº¦
```

### ğŸ“¦ å¿…è£…ä¼˜åŒ–æ¨¡ç»„æ¨è

| æ¨¡ç»„åç§° | åŠŸèƒ½è¯´æ˜ | ä¸‹è½½é“¾æ¥ | é€‚ç”¨ç«¯ |
|----------|----------|----------|--------|
| **Spark** | æ€§èƒ½åˆ†æå’Œç›‘æ§å·¥å…· | [CurseForge](https://www.curseforge.com/minecraft/mc-mods/spark) | Forge/Fabric |
| **AI Improvements** | ä¼˜åŒ–ç”Ÿç‰©AIï¼Œå‡å°‘CPUå ç”¨ | [CurseForge](https://www.curseforge.com/minecraft/mc-mods/ai-improvements) | Forge |
| **Chunky** | åœ°å›¾é¢„ç”Ÿæˆå·¥å…· | [Modrinth](https://modrinth.com/plugin/chunky) | é€šç”¨ |
| **FerriteCore** | å†…å­˜ä½¿ç”¨ä¼˜åŒ– | [CurseForge](https://www.curseforge.com/minecraft/mc-mods/ferritecore) | Forge/Fabric |
| **Lithium** | æœåŠ¡ç«¯æ€§èƒ½ä¼˜åŒ– | [Modrinth](https://modrinth.com/mod/lithium) | Fabric |

#### ğŸ”„ ç®¡ç†æ¨¡ç»„æ¨è

| æ¨¡ç»„åç§° | åŠŸèƒ½è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|----------|----------|----------|
| **FTB Essentials** | è½»é‡çº§ç®¡ç†åŠŸèƒ½ï¼ˆä¼ é€ã€ç»æµï¼‰ | æ›¿ä»£é‡å‹æ’ä»¶ |
| **FTB Backups 2** | è‡ªåŠ¨å¤‡ä»½å­˜æ¡£ | æ•°æ®å®‰å…¨ä¿éšœ |
| **Entity Culling** | è‡ªåŠ¨æ¸…é™¤é—²ç½®å®ä½“ | é«˜å®ä½“å¯†åº¦åœºæ™¯ |
| **Clumps** | ç»éªŒçƒèšåˆï¼Œå‡å°‘å®ä½“æ•°é‡ | ç»éªŒå†œåœºæœåŠ¡å™¨ |


## ğŸ“Š ä¸»æµæ•´åˆåŒ…æ€§èƒ½éœ€æ±‚å‚è€ƒ

> ğŸ’¡ **è¯´æ˜**ï¼šæ•°æ®åŸºäºå®é™…æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒã€‚å…·ä½“éœ€æ±‚å› ç©æ³•è€Œå¼‚ã€‚

### ğŸ® è½»é‡çº§æ•´åˆåŒ…

| æ•´åˆåŒ…åç§° | 1-3äººæœ€ä½ | 5-10äººæ¨è | 20äººä»¥ä¸Š | ç‰¹æ®Šè¯´æ˜ |
|------------|-----------|------------|----------|----------|
| **[NEW] æ–°æ˜Ÿå·¥ç¨‹ï¼šä¸–ç•Œ** | 2GBå†…å­˜ | 4GBå†…å­˜ | 6GBå†…å­˜ | æç®€æ¨¡ç»„ï¼Œæ€§èƒ½å‹å¥½ |
| **é¦™è‰çºªå…ƒï¼šé£Ÿæ—…çºªè¡Œ** | 4GBå†…å­˜ | 6GBå†…å­˜ | 8GBå†…å­˜ | è½»é‡çº§æ•´åˆï¼Œé€‚åˆä¼‘é—² |
| **[AFoP] å®ç„¶ä¸€éš…** | 4GBå†…å­˜ | 6GBå†…å­˜ | 8GBå†…å­˜ | é€‚åˆä¸­å°å‹ç¤¾åŒº |

### âš¡ ä¸­ç­‰è´Ÿè½½æ•´åˆåŒ…

| æ•´åˆåŒ…åç§° | 1-3äººæœ€ä½ | 5-10äººæ¨è | 20äººä»¥ä¸Š | ç‰¹æ®Šè¯´æ˜ |
|------------|-----------|------------|----------|----------|
| **[NFWC] è„†éª¨ç—‡** | 6GBå†…å­˜ | 8GBå†…å­˜ | 12GBå†…å­˜ | åæœŸéœ€æå‡å­˜å‚¨æ€§èƒ½ |
| **[TLT] åŒ é€ ä¹‹ä¼ ** | 6GBå†…å­˜ | 8GBå†…å­˜ | 12GBå†…å­˜ | æœºæ¢°æ¨¡ç»„è¾ƒå¤š |
| **[SD] å’’æ¬¡å…ƒ** | 6GBå†…å­˜ | 8GBå†…å­˜ | 10GBå†…å­˜ | é­”æ³•æ¨¡ç»„ï¼Œæ³¨æ„å®ä½“ç”Ÿæˆ |
| **[CD] æœºæ¢°åŠ¨åŠ›ï¼šæ‚ ç„¶ä¹äº‹** | 8GBå†…å­˜ | 10GBå†…å­˜ | 16GBå†…å­˜ | Createæœºæ¢°+å†œä¸šåŒé‡è´Ÿè½½ |

### ğŸ”¥ é«˜è´Ÿè½½æ•´åˆåŒ…

| æ•´åˆåŒ…åç§° | 1-3äººæœ€ä½ | 5-10äººæ¨è | 20äººä»¥ä¸Š | ç‰¹æ®Šè¯´æ˜ |
|------------|-----------|------------|----------|----------|
| **[CTNH] æœºæ¢°åŠ¨åŠ›ï¼šæ–°è§†é‡** | 8GBå†…å­˜ | 12GBå†…å­˜ | 20GBå†…å­˜ | Createç³»åˆ—ï¼Œéœ€é«˜æ€§èƒ½CPU |
| **[ATM 9] All the Mods 9** | 8GBå†…å­˜ | 12GBå†…å­˜ | 16GBå†…å­˜ | æ¨¡ç»„æ•°é‡å¤šï¼Œéœ€å®šæœŸæ¸…ç† |
| **[MB 3] é”»é€ å¤§å¸ˆ 3** | 10GBå†…å­˜ | 16GBå†…å­˜ | 24GBå†…å­˜ | é‡‘å±å†¶ç‚¼ç³»ç»Ÿå†…å­˜éœ€æ±‚é«˜ |
| **ä¹Œæ‰˜é‚¦** | 12GBå†…å­˜ | 20GBå†…å­˜ | 32GBå†…å­˜+ | âš ï¸ ä¼ è¯´çº§æ•´åˆåŒ…ï¼Œæ…å…¥ï¼ |
| **é¾™ä¹‹å†’é™©ï¼šæ–°å¾ç¨‹** | 12GBå†…å­˜ | 24GBå†…å­˜ | 32GBå†…å­˜+ | âš ï¸è­¦å‘Šï¼šè¿™ä¸æ˜¯æ¸¸æˆï¼Œæ˜¯å¯¹è®¾å¤‡çš„ç”Ÿå­˜æŒ‘æˆ˜ï¼ |

### âš ï¸ é—®é¢˜æ•´åˆåŒ…

| æ•´åˆåŒ…åç§° | çŠ¶æ€ | è¯´æ˜ |
|------------|------|------|
| **èµé‡‘çŒäºº** | ä¸æ¨è | ä¼˜åŒ–è¾ƒå·®ï¼Œå†…å­˜æ³„æ¼ä¸¥é‡ |
| **æ„šè€…ï¼šThe Fool** | é«˜é£é™© | å†…å­˜æ³„æ¼é£é™©é«˜ï¼Œéœ€ä¸“ä¸šç»´æŠ¤ |


## ğŸ”§ æ€§èƒ½ä¼˜åŒ–è¿›é˜¶æŠ€å·§

### ğŸ’¾ å†…å­˜åˆ†é…ç­–ç•¥

#### åˆ†é…å…¬å¼
```
æ¨èå†…å­˜ = åŸºç¡€éœ€æ±‚ + (æ¨¡ç»„æ•°é‡ Ã— 0.1GB) + (ç©å®¶æ•° Ã— 0.8GB)
```

#### JVMå‚æ•°ä¼˜åŒ–
> è¯¦ç»†å†…å®¹å¯å‚è€ƒ ğŸ‘‰ ***[æœåŠ¡å™¨ JVM è°ƒä¼˜å®Œå…¨æŒ‡å—](https://doc.liuliyue.cn/web/#/638364699/269884964 "ã€ã€‘")***
```bash
# æ¨èå¯åŠ¨å‚æ•°ï¼ˆ12GBå†…å­˜ç¤ºä¾‹ï¼‰
java -Xms12G -Xmx12G \
  -XX:+UseG1GC \
  -XX:+ParallelRefProcEnabled \
  -XX:MaxGCPauseMillis=200 \
  -XX:+UnlockExperimentalVMOptions \
  -XX:+DisableExplicitGC \
  -XX:+AlwaysPreTouch \
  -XX:G1NewSizePercent=30 \
  -XX:G1MaxNewSizePercent=40 \
  -XX:G1HeapRegionSize=8M \
  -XX:G1ReservePercent=20 \
  -XX:G1HeapWastePercent=5 \
  -XX:G1MixedGCCountTarget=4 \
  -XX:InitiatingHeapOccupancyPercent=15 \
  -XX:G1MixedGCLiveThresholdPercent=90 \
  -XX:G1RSetUpdatingPauseTimePercent=5 \
  -XX:SurvivorRatio=32 \
  -XX:+PerfDisableSharedMem \
  -XX:MaxTenuringThreshold=1 \
  -jar server.jar nogui
```

### ğŸ—ºï¸ åŒºå—ç®¡ç†ä¼˜åŒ–

#### é¢„ç”Ÿæˆè®¾ç½®
```bash
# ä½¿ç”¨ Chunky é¢„ç”ŸæˆåŒºå—
/chunky world world        # é€‰æ‹©ä¸»ä¸–ç•Œ
/chunky radius 3000        # è®¾ç½®åŠå¾„3000å—
/chunky start              # å¼€å§‹é¢„ç”Ÿæˆ
```

#### åŒºå—åŠ è½½é™åˆ¶
```properties
# server.properties è¡¥å……é…ç½®
max-chained-neighbor-updates=1000000
player-idle-timeout=30           # ç©ºé—²ç©å®¶30åˆ†é’Ÿåè¸¢å‡º
```

### ğŸ¾ å®ä½“æ§åˆ¶ç­–ç•¥

#### å®ä½“å¯†åº¦æ§åˆ¶
```yaml
# ä½¿ç”¨ Entity Culling æ¨¡ç»„é…ç½®
entity-culling:
  max-entities-per-chunk: 50
  cull-distance: 128
  aggressive-culling: true
```

#### åˆ·æ€ªæ§åˆ¶
```properties
# server.properties åˆ·æ€ªè®¾ç½®
spawn-monsters=true
spawn-animals=true
spawn-npcs=true
spawn-protection=0
max-entity-cramming=24      # å®ä½“å †å é™åˆ¶
```


## ğŸ” æ€§èƒ½ç›‘æ§ä¸è¯Šæ–­

### ğŸ“Š Spark æ€§èƒ½åˆ†æ

#### åŸºç¡€ç›‘æ§å‘½ä»¤
```bash
# ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
/spark profiler start
/spark profiler stop
/spark profiler upload

# å†…å­˜åˆ†æ
/spark heapdump
/spark gc
```

#### å…³é”®æŒ‡æ ‡è§£è¯»
- **TPS**: ä¿æŒåœ¨19.5+ä¸ºç†æƒ³çŠ¶æ€
- **å†…å­˜ä½¿ç”¨**: ä¸è¶…è¿‡åˆ†é…å†…å­˜çš„80%
- **GCé¢‘ç‡**: æ¯åˆ†é’Ÿå°‘äº5æ¬¡
- **å®ä½“æ•°é‡**: å•åŒºå—ä¸è¶…è¿‡50ä¸ª

### ğŸ¯ æ€§èƒ½ç“¶é¢ˆæ’æŸ¥

| ç—‡çŠ¶ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| **TPSä¸‹é™** | è¿‡å¤šå®ä½“/å¤æ‚æœºæ¢° | ä½¿ç”¨ Entity Cullingï¼Œç®€åŒ–æœºæ¢° |
| **å†…å­˜æº¢å‡º** | å†…å­˜åˆ†é…ä¸è¶³ | å¢åŠ  -Xmx å‚æ•° |
| **é¢‘ç¹GC** | å†…å­˜ç¢ç‰‡åŒ– | ä¼˜åŒ– G1GC å‚æ•° |
| **åŒºå—åŠ è½½æ…¢** | ç¡¬ç›˜IOç“¶é¢ˆ | å‡çº§åˆ° *éº¦å—ä¼šå‘˜PRO* |


## âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### ğŸ”§ æ¨¡ç»„å…¼å®¹æ€§é—®é¢˜

#### å¸¸è§å†²çª
```yaml
å†²çªç»„åˆ:
  - OptiFine + Rubidium: å…‰å½±æ¸²æŸ“å†²çª
  - JEI + REI: ç‰©å“æŸ¥è¯¢ç•Œé¢å†²çª
  - Forge + Fabricæ¨¡ç»„: APIä¸å…¼å®¹

è§£å†³æ–¹æ¡ˆ:
  - ä½¿ç”¨ MixinBootstrap æ¡¥æ¥
  - é€‰æ‹©åŒç±»æ¨¡ç»„ä¸­çš„ä¸€ä¸ª
  - æŸ¥çœ‹æ¨¡ç»„å…¼å®¹æ€§åˆ—è¡¨
```

#### ç‰ˆæœ¬åŒ¹é…æ£€æŸ¥
```bash
# æ£€æŸ¥æ¨¡ç»„ç‰ˆæœ¬å…¼å®¹æ€§
1. ç¡®è®¤ Minecraft ç‰ˆæœ¬ä¸€è‡´
2. ç¡®è®¤ Forge/Fabric ç‰ˆæœ¬å…¼å®¹
3. æ£€æŸ¥æ¨¡ç»„ä¾èµ–å…³ç³»
4. ä½¿ç”¨ ModList æ£€æŸ¥å†²çª
```

### ğŸ› ï¸ æ€§èƒ½è°ƒä¼˜æŠ€å·§

#### åŠ¨æ€é…ç½®è°ƒæ•´
```properties
# é«˜å³°æœŸé…ç½®
view-distance=6
simulation-distance=4
max-players=15

# ä½å³°æœŸé…ç½®
view-distance=10
simulation-distance=8
max-players=30
```

#### æ•´åˆåŒ…ç‰¹æ®Šå¤„ç†
```yaml
RLCraft:
  - å®‰è£… BetterF3 ç›‘æ§å†…å­˜
  - å…³é—­ä¸å¿…è¦çš„å…‰å½±æ•ˆæœ
  - é™åˆ¶åŒæ—¶åœ¨çº¿ç©å®¶æ•°

Create ç³»åˆ—:
  - ç¦ç”¨çˆ†ç‚¸åœ°å½¢ç ´å
  - é™åˆ¶æœºæ¢°å¤æ‚åº¦
  - ä½¿ç”¨åŒºå—åŠ è½½å™¨åˆç†è§„åˆ’
```


## ğŸ“ˆ æ€§èƒ½æµ‹è¯•ä¸åŸºå‡†

### ğŸ§ª æ ‡å‡†æµ‹è¯•æµç¨‹

1. **åŸºç¡€æµ‹è¯•**
   ```bash
   # ç©ºæœåŠ¡å™¨å¯åŠ¨æµ‹è¯•
   å¯åŠ¨æ—¶é—´: < 2åˆ†é’Ÿ
   ç©ºè½½å†…å­˜: < 2GB
   TPSç¨³å®šæ€§: 20.0
   ```

2. **è´Ÿè½½æµ‹è¯•**
   ```bash
   # æ¨¡æ‹Ÿç©å®¶æµ‹è¯•
   ä½¿ç”¨ JMeter æˆ– MCStresser
   æµ‹è¯•å¹¶å‘è¿æ¥: ç›®æ ‡ç©å®¶æ•° Ã— 1.5
   ç›‘æ§ TPS å˜åŒ–
   ```

3. **é•¿æœŸç¨³å®šæ€§æµ‹è¯•**
   ```bash
   # 24å°æ—¶è¿ç»­è¿è¡Œ
   ç›‘æ§å†…å­˜æ³„æ¼
   è®°å½• GC é¢‘ç‡
   æ£€æŸ¥æ—¥å¿—é”™è¯¯
   ```

### ğŸ“‹ æ€§èƒ½è¯„ä¼°æ¸…å•

- [ ] å¯åŠ¨æ—¶é—´ < 3åˆ†é’Ÿ
- [ ] ç©ºè½½å†…å­˜ä½¿ç”¨ < åˆ†é…å†…å­˜çš„30%
- [ ] TPSä¿æŒåœ¨19.8+
- [ ] åŒºå—åŠ è½½å»¶è¿Ÿ < 500ms
- [ ] ç©å®¶è¿æ¥å»¶è¿Ÿ < 100ms
- [ ] æ— å†…å­˜æ³„æ¼è­¦å‘Š
- [ ] æ— é¢‘ç¹GCæš‚åœ
- [ ] æ¨¡ç»„å…¼å®¹æ€§è‰¯å¥½


## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### ğŸ”„ æ—¥å¸¸ç»´æŠ¤

1. **å®šæœŸæ¸…ç†**
   ```bash
   # æ¯å‘¨æ‰§è¡Œ
   /kill @e[type=item]        # æ¸…ç†æ‰è½ç‰©
   /chunky trim               # æ¸…ç†æœªä½¿ç”¨åŒºå—
   é‡å¯æœåŠ¡å™¨                   # æ¸…ç†å†…å­˜ç¢ç‰‡
   ```

2. **å¤‡ä»½ç­–ç•¥**
   ```bash
   # è‡ªåŠ¨å¤‡ä»½é…ç½®
   æ¯4å°æ—¶: å¢é‡å¤‡ä»½
   æ¯å¤©: å®Œæ•´å¤‡ä»½
   æ¯å‘¨: å¼‚åœ°å¤‡ä»½
   ```

3. **ç›‘æ§æŠ¥è­¦**
   ```yaml
   è®¾ç½®ç›‘æ§é˜ˆå€¼:
     TPS < 18: å‘é€è­¦å‘Š
     å†…å­˜ä½¿ç”¨ > 90%: å‘é€è­¦å‘Š
     ç£ç›˜ç©ºé—´ < 10GB: å‘é€è­¦å‘Š
   ```


## ğŸ“š æ‰©å±•å‚è€ƒ

- [Forgeå®˜æ–¹æ–‡æ¡£](https://docs.minecraftforge.net/)
- [Fabricå®˜æ–¹æ–‡æ¡£](https://fabricmc.net/wiki/)
- [JVMè°ƒä¼˜æŒ‡å—](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/)
- [Sparkæ€§èƒ½åˆ†æå™¨](https://spark.lucko.me/)
